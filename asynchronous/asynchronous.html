<!DOCTYPE html>
<html lang="">
<head>
    <title>Asynchronous</title>
</head>
<body>
    <script>
        // function getRecipe() {
        //     setTimeout(() => {
        //         const recipeID = [34, 64, 13, 64];
        //         console.log(recipeID);
        //          setTimeout((id) => {
        //              const recipe = {title: 'Fresh tomato pasta', publisher: 'Vikas'};
        //              console.log(`${id}: ${recipe.title}`);

        //              setTimeout(publisher => {
        //                  const recipe = {title: 'Italian pizza', publisher: publisher};
        //                  console.log(recipe);
        //              }, 1500, recipe.publisher);
        //          }, 1500, recipeID[2]);
        //     }, 1500);
        // }
        // getRecipe();


        /////////Promise

        const getIDs = new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve([34, 64, 13, 64]);
                // reject('ERROR');
            }, 1500);
        });

        const getRecipe = recID => {
            return new Promise((resolve, reject) => {
                setTimeout(ID => {
                    const recipe = {title: 'Fresh tomato pasta', publisher: 'Vikas'};
                    resolve(`${ID}: ${recipe.title}`);
                }, 1500, recID);
            })
        };

        const getRelated = publisher => {
            return new Promise((resolve, reject) => {
                setTimeout((pub) => {
                    const recipe = {title: 'Fresh tomato pasta', publisher: pub};
                    resolve(`${pub}: ${recipe.title}`);
                }, 1500, publisher);
            });
        };

        // getIDs
        // .then(IDs => {    // handles fulfilled promise
        //     console.log(IDs);
        //     return getRecipe(IDs[2]); // returns
        // })
        // .then(recipe => {   // equal to what above then method returns
        //     console.log(recipe);
        //     return getRelated('Vikas Kumar');
        // })
        // .then(publisher => {
        //     console.log(publisher);
        // })
        // .catch(error => {   //handles rejected promise
        //     console.log(error);
        // });

        
        /////////////////////
        // async await

        async function getRecipesAW() {
            const IDs = await getIDs;
            console.log(IDs);
            const recipe = await getRecipe(IDs[2]);
            console.log(recipe);
            const related = await getRelated('Vikas Kumar');
            console.log(related);
        }
        getRecipesAW();

    </script>
</body>
</html>